<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Barat√£o Assados - Home</title>
    <link rel="stylesheet" href="style_index.css" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="background-animation"></div>

    <section class="principal">
      <!-- Header com Logo e Sauda√ß√£o -->
      <div class="header-section">
        <div class="logo-container">
          <div class="logo-icon">
            <i class="fas fa-fire"></i>
          </div>
          <div class="logo-text">
            <h1>Barat√£o Assados</h1>
            <p class="logo-subtitle">Sabor que conquista!</p>
          </div>
        </div>

        <div class="user-welcome">
          <i class="fas fa-user-circle"></i>
          <span>Ol√°, bem-vindo!</span>
          <button
            class="btn-logout"
            data-action="logout"
            aria-label="Sair da conta"
          >
            <i class="fas fa-sign-out-alt"></i>
          </button>
        </div>
      </div>

      <!-- Status do Estabelecimento -->
      <div class="status-card">
        <div class="status-info">
          <div class="status-indicator">
            <div class="status-dot" id="statusDot"></div>
            <span class="status-text" id="statusText">Verificando...</span>
          </div>
          <div class="current-time" id="currentTime"></div>
        </div>
        <div class="available-services" id="availableServices">
          <!-- Preenchido dinamicamente pelo JS -->
        </div>
      </div>

      <!-- Menu de Navega√ß√£o Principal -->
      <div class="main-menu">
        <div class="menu-grid">
          <!-- CARD UNIFICADO: Card√°pio & Pedidos -->
          <div class="menu-card primary featured">
            <div class="card-icon large">
              <i class="fas fa-utensils"></i>
            </div>
            <div class="card-content expanded">
              <h3>Card√°pio & Pedidos</h3>
              <p class="card-description">
                Explore nossos pratos e fa√ßa seu pedido
              </p>

              <!-- Status dos menus dispon√≠veis -->
              <div class="available-menus" id="availableMenus">
                <!-- Ser√° preenchido dinamicamente pelo JS -->
              </div>

              <!-- Quick features -->
              <div class="quick-features">
                <div class="feature-item">
                  <i class="fas fa-eye"></i>
                  <span>Ver Card√°pio</span>
                </div>
                <div class="feature-item">
                  <i class="fas fa-shopping-cart"></i>
                  <span>Fazer Pedido</span>
                </div>
                <div class="feature-item">
                  <i class="fas fa-clock"></i>
                  <span>Entrega R√°pida</span>
                </div>
              </div>

              <!-- Categorias principais -->
              <div class="categories-preview">
                <div class="category-tag">
                  <i class="fas fa-fire"></i>
                  <span>Assados</span>
                </div>
                <div class="category-tag">
                  <i class="fas fa-cow"></i>
                  <span>Bovino</span>
                </div>
                <div class="category-tag">
                  <i class="fas fa-drumstick-bite"></i>
                  <span>Frango</span>
                </div>
                <div class="category-tag">
                  <i class="fas fa-glass-cheers"></i>
                  <span>Bebidas</span>
                </div>
              </div>
            </div>
            <button
              class="btn-card featured"
              data-action="open-menu"
              aria-label="Abrir Card√°pio e Fazer Pedido"
              id="btnOpenMenu"
            >
              <span id="btnMenuText">Abrir Card√°pio</span>
              <i class="fas fa-arrow-right"></i>
            </button>
          </div>

          <!-- Meus Pedidos -->
          <div class="menu-card info">
            <div class="card-icon">
              <i class="fas fa-list-alt"></i>
            </div>
            <div class="card-content">
              <h3>Meus Pedidos</h3>
              <p>Acompanhe o status dos seus pedidos</p>
              <div class="order-summary">
                <span class="summary-item">
                  <i class="fas fa-truck"></i>
                  Entregas ativas
                </span>
                <span class="summary-item">
                  <i class="fas fa-history"></i>
                  Hist√≥rico completo
                </span>
              </div>
            </div>
            <button
              class="btn-card"
              data-action="show-my-orders"
              aria-label="Consultar Meus Pedidos"
            >
              <span>Consultar Pedidos</span>
              <i class="fas fa-arrow-right"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Se√ß√£o de Contatos Modernizada -->
      <div class="contatos-section">
        <p class="contatos-title">Onde nos encontrar</p>
        <div class="contatos">
          <a
            href="https://www.instagram.com/barataoassados/"
            target="_blank"
            rel="noopener"
            class="social-link instagram"
          >
            <i class="fab fa-instagram"></i>
            <span>Instagram</span>
          </a>
          <a
            href="https://wa.me/5500000000000"
            target="_blank"
            rel="noopener"
            class="social-link whatsapp"
          >
            <i class="fab fa-whatsapp"></i>
            <span>WhatsApp</span>
          </a>
          <a
            href="https://wa.me/5500000000000"
            target="_blank"
            rel="noopener"
            class="social-link location"
          >
            <i class="fas fa-map-marker-alt"></i>
            <span>Localiza√ß√£o</span>
          </a>
        </div>
      </div>
    </section>

    <!-- Modal de Estabelecimento Fechado -->
    <div
      id="modalEstabelecimentoFechado"
      class="modal"
      role="dialog"
      aria-labelledby="modal-closed-title"
      aria-hidden="true"
    >
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modal-closed-title">
            <i class="fas fa-store-slash"></i>
            Servi√ßo Indispon√≠vel
          </h2>
          <button
            class="close-btn"
            data-action="close-closed-modal"
            aria-label="Fechar modal"
          >
            &times;
          </button>
        </div>
        <div class="modal-body">
          <div class="closed-info">
            <div class="closed-icon">
              <i class="fas fa-clock"></i>
            </div>
            <h3>Servi√ßo indispon√≠vel no momento</h3>
            <p>Consulte nossos hor√°rios de funcionamento abaixo:</p>

            <div class="schedule-info">
              <h4><i class="fas fa-calendar-alt"></i> Nossos Hor√°rios:</h4>
              <div class="schedule-list">
                <div class="schedule-item">
                  <strong>Almo√ßo:</strong>
                  <div class="schedule-details">
                    <span>Quinta-feira, Domingo e Feriados</span>
                    <span class="time-info">11:00 √†s 15:00</span>
                  </div>
                </div>
                <div class="schedule-item">
                  <strong>Assados B√°sicos:</strong>
                  <div class="schedule-details">
                    <span>Quinta e Sexta-feira</span>
                    <span class="time-info">18:00 √†s 22:00</span>
                  </div>
                </div>
                <div class="schedule-item">
                  <strong>Assados Completos:</strong>
                  <div class="schedule-details">
                    <span>S√°bado, Domingo e Feriados</span>
                    <span class="time-info">18:00 √†s 22:00</span>
                  </div>
                </div>
                <div class="schedule-item">
                  <strong>Jantinha:</strong>
                  <div class="schedule-details">
                    <span>Quarta a Sexta-feira</span>
                    <span class="time-info">18:00 √†s 22:00</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="current-status" id="currentStatusInfo">
              <!-- Ser√° preenchido dinamicamente -->
            </div>

            <div class="contact-info">
              <p>
                <i class="fas fa-info-circle"></i> Para mais informa√ß√µes, entre
                em contato conosco atrav√©s dos nossos canais!
              </p>
            </div>

            <div class="modal-actions">
              <button class="btn-close-modal" data-action="close-closed-modal">
                <i class="fas fa-times"></i>
                Fechar
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- √Årea de notifica√ß√µes -->
    <div
      id="notificationArea"
      class="notification-area"
      aria-live="polite"
    ></div>

    <script>
      // js/home.js - Aplica√ß√£o principal da p√°gina HOME

      /**
       * P√°gina HOME - Barat√£o Assados
       * Arquitetura: Module Pattern + Observer Pattern
       * Desenvolvido com ES6+ e princ√≠pios SOLID
       */

      // ==================== M√ìDULO DE DISPONIBILIDADE ====================
      const AvailabilityModule = (() => {
        "use strict";

        /**
         * Verifica se uma data √© feriado nacional brasileiro.
         * @param {Date} date - A data a ser verificada.
         * @returns {boolean} True se for feriado, false caso contr√°rio.
         */
        const isHoliday = (date) => {
          const year = date.getFullYear();
          const month = date.getMonth() + 1; // getMonth() retorna 0-11
          const day = date.getDate();

          // Feriados fixos
          const fixedHolidays = [
            { month: 1, day: 1 }, // Ano Novo
            { month: 4, day: 21 }, // Tiradentes
            { month: 5, day: 1 }, // Dia do Trabalho
            { month: 9, day: 7 }, // Independ√™ncia do Brasil
            { month: 10, day: 12 }, // Nossa Senhora Aparecida
            { month: 11, day: 2 }, // Finados
            { month: 11, day: 15 }, // Proclama√ß√£o da Rep√∫blica
            { month: 12, day: 25 }, // Natal
          ];

          return fixedHolidays.some(
            (holiday) => holiday.month === month && holiday.day === day
          );
        };

        /**
         * Verifica se um hor√°rio est√° dentro de um intervalo.
         * @param {number} currentHour - Hora atual (0-23).
         * @param {number} currentMinute - Minuto atual (0-59).
         * @param {string} startTime - Hor√°rio de in√≠cio (formato "HH:MM").
         * @param {string} endTime - Hor√°rio de fim (formato "HH:MM").
         * @returns {boolean} True se estiver dentro do hor√°rio, false caso contr√°rio.
         */
        const isWithinTimeRange = (
          currentHour,
          currentMinute,
          startTime,
          endTime
        ) => {
          const [startHour, startMin] = startTime.split(":").map(Number);
          const [endHour, endMin] = endTime.split(":").map(Number);

          const currentTotalMinutes = currentHour * 60 + currentMinute;
          const startTotalMinutes = startHour * 60 + startMin;
          const endTotalMinutes = endHour * 60 + endMin;

          return (
            currentTotalMinutes >= startTotalMinutes &&
            currentTotalMinutes < endTotalMinutes
          );
        };

        /**
         * Determina quais servi√ßos est√£o dispon√≠veis baseado no dia da semana, hor√°rio e se √© feriado.
         * @param {Date} [date=new Date()] - A data para verificar disponibilidade.
         * @returns {Object} Objeto com os servi√ßos dispon√≠veis e suas configura√ß√µes.
         */
        const getAvailableServices = (date = new Date()) => {
          const dayOfWeek = date.getDay(); // 0 = Domingo, 1 = Segunda, ..., 6 = S√°bado
          const currentHour = date.getHours();
          const currentMinute = date.getMinutes();
          const isHolidayToday = isHoliday(date);

          const services = {
            almoco: {
              name: "Almo√ßo",
              icon: "fas fa-sun",
              available: false,
              description: "Card√°pio completo de almo√ßo",
              schedule: "Quinta-feira, Domingo e Feriados (11:00 √†s 15:00)",
            },
            assados: {
              name: "Assados",
              icon: "fas fa-fire",
              available: false,
              type: null, // 'basico' ou 'completo'
              description: "",
              schedule: "",
            },
            jantinha: {
              name: "Jantinha",
              icon: "fas fa-moon",
              available: false,
              description: "Op√ß√µes para o final do dia",
              schedule: "Quarta a Sexta-feira (18:00 √†s 22:00)",
            },
          };

          // L√≥gica de disponibilidade baseada nas regras fornecidas:

          // ALMO√áO - Quinta, Domingo e Feriados (11:00 √†s 15:00)
          if (
            (dayOfWeek === 4 || dayOfWeek === 0 || isHolidayToday) &&
            isWithinTimeRange(currentHour, currentMinute, "11:00", "15:00")
          ) {
            services.almoco.available = true;
          }

          // ASSADOS - Quinta e Sexta (b√°sico), S√°bado, Domingo e Feriado (completo) - 18:00 √†s 22:00
          if (
            (dayOfWeek === 4 || dayOfWeek === 5) &&
            isWithinTimeRange(currentHour, currentMinute, "18:00", "22:00")
          ) {
            // Quinta e Sexta
            services.assados.available = true;
            services.assados.type = "basico";
            services.assados.name = "Assados B√°sicos";
            services.assados.description = "Sele√ß√£o b√°sica de assados";
            services.assados.schedule = "Quinta e Sexta-feira (18:00 √†s 22:00)";
          } else if (
            (dayOfWeek === 6 || dayOfWeek === 0 || isHolidayToday) &&
            isWithinTimeRange(currentHour, currentMinute, "18:00", "22:00")
          ) {
            // S√°bado, Domingo e Feriados
            services.assados.available = true;
            services.assados.type = "completo";
            services.assados.name = "Assados Completos";
            services.assados.description = "Card√°pio completo de assados";
            services.assados.schedule =
              "S√°bado, Domingo e Feriados (18:00 √†s 22:00)";
          }

          // JANTINHA - Quarta a Sexta (18:00 √†s 22:00)
          if (
            dayOfWeek >= 3 &&
            dayOfWeek <= 5 &&
            isWithinTimeRange(currentHour, currentMinute, "18:00", "22:00")
          ) {
            // Quarta (3), Quinta (4), Sexta (5)
            services.jantinha.available = true;
          }

          return services;
        };

        /**
         * Retorna informa√ß√µes sobre o status atual do estabelecimento.
         * @param {Date} [date=new Date()] - A data para verificar o status.
         * @returns {Object} Objeto com informa√ß√µes de status.
         */
        const getStatus = (date = new Date()) => {
          const services = getAvailableServices(date);
          const hasAnyService = Object.values(services).some(
            (service) => service.available
          );

          return {
            isOpen: hasAnyService,
            message: hasAnyService ? "Aberto agora" : "Fechado no momento",
            services: services,
            currentTime: date.toLocaleTimeString("pt-BR", {
              hour: "2-digit",
              minute: "2-digit",
            }),
            currentDay: date.toLocaleDateString("pt-BR", { weekday: "long" }),
          };
        };

        /**
         * Retorna o pr√≥ximo hor√°rio de funcionamento.
         * @param {Date} [date=new Date()] - A data para verificar.
         * @returns {string} Informa√ß√£o sobre o pr√≥ximo funcionamento.
         */
        const getNextAvailableTime = (date = new Date()) => {
          const dayNames = [
            "Domingo",
            "Segunda",
            "Ter√ßa",
            "Quarta",
            "Quinta",
            "Sexta",
            "S√°bado",
          ];
          const currentDay = date.getDay();
          const currentHour = date.getHours();

          // Verifica se ainda h√° servi√ßos hoje
          const today = new Date(date);
          if (currentHour < 22) {
            // Verifica pr√≥ximos servi√ßos hoje
            if (currentDay === 4 && currentHour < 11) {
              // Quinta antes das 11h
              return "Almo√ßo dispon√≠vel hoje √†s 11:00";
            }
            if (currentDay === 0 && currentHour < 11) {
              // Domingo antes das 11h
              return "Almo√ßo dispon√≠vel hoje √†s 11:00";
            }
            if (currentDay >= 3 && currentDay <= 5 && currentHour < 18) {
              // Quarta-Sexta antes das 18h
              return "Servi√ßos dispon√≠veis hoje √†s 18:00";
            }
            if ((currentDay === 6 || currentDay === 0) && currentHour < 18) {
              // S√°bado/Domingo antes das 18h
              return "Assados Completos dispon√≠veis hoje √†s 18:00";
            }
          }

          // Pr√≥ximo dia com servi√ßo
          if (currentDay >= 0 && currentDay <= 2) {
            // Domingo-Ter√ßa
            return "Pr√≥ximo funcionamento: Quarta-feira √†s 18:00";
          } else if (currentDay === 6) {
            // S√°bado
            return "Pr√≥ximo funcionamento: Domingo √†s 11:00";
          } else {
            return "Consulte nossos hor√°rios de funcionamento";
          }
        };

        // API p√∫blica do m√≥dulo de disponibilidade
        return {
          getAvailableServices,
          getStatus,
          getNextAvailableTime,
          isHoliday,
        };
      })();

      // ==================== M√ìDULO DE NAVEGA√á√ÉO ====================
      const NavigationModule = (() => {
        "use strict";

        /**
         * Abre a p√°gina do card√°pio se o estabelecimento estiver funcionando.
         * Caso contr√°rio, exibe modal informativo.
         */
        const openCardapio = () => {
          const status = AvailabilityModule.getStatus();

          if (status.isOpen) {
            // Estabelecimento aberto - redireciona para o card√°pio
            window.location.href = "cardapio.html";
          } else {
            // Estabelecimento fechado - exibe modal informativo
            showClosedModal();
          }
        };

        /**
         * Exibe o modal informando que o estabelecimento est√° fechado.
         */
        const showClosedModal = () => {
          const modal = document.querySelector("#modalEstabelecimentoFechado");
          if (modal) {
            // Atualiza informa√ß√µes do status atual no modal
            updateModalCurrentStatus();

            modal.style.display = "flex";
            modal.setAttribute("aria-hidden", "false");

            // Impede o scroll da p√°gina de fundo
            document.body.style.overflow = "hidden";
          }
        };

        /**
         * Atualiza as informa√ß√µes de status atual no modal.
         */
        const updateModalCurrentStatus = () => {
          const statusInfoElement =
            document.querySelector("#currentStatusInfo");
          if (!statusInfoElement) return;

          const status = AvailabilityModule.getStatus();
          const nextAvailable = AvailabilityModule.getNextAvailableTime();

          statusInfoElement.innerHTML = `
            <div class="current-info">
              <h4><i class="fas fa-info-circle"></i> Status Atual:</h4>
              <div class="status-details">
                <p><strong>Agora:</strong> ${status.currentTime} - ${status.currentDay}</p>
                <p><strong>Status:</strong> ${status.message}</p>
                <p><strong>Pr√≥ximo funcionamento:</strong> ${nextAvailable}</p>
              </div>
            </div>
          `;
        };

        /**
         * Fecha o modal de estabelecimento fechado.
         */
        const closeClosedModal = () => {
          const modal = document.querySelector("#modalEstabelecimentoFechado");
          if (modal) {
            modal.style.display = "none";
            modal.setAttribute("aria-hidden", "true");

            // Restaura o scroll da p√°gina
            document.body.style.overflow = "auto";
          }
        };

        // API p√∫blica do m√≥dulo de navega√ß√£o
        return {
          openCardapio,
          showClosedModal,
          closeClosedModal,
        };
      })();

      // ==================== M√ìDULO DE DADOS ====================
      const DataModule = (() => {
        "use strict";

        // Configura√ß√µes da aplica√ß√£o
        const CONFIG = {
          UPDATE_TIME_INTERVAL: 60000, // 1 minuto
          SCHEDULE_ADVANCE_PERCENTAGE: 0.45, // 45% a 50%
        };

        // API p√∫blica do m√≥dulo
        return {
          CONFIG,
        };
      })();

      // ==================== M√ìDULO DE UTILIT√ÅRIOS ====================
      const UtilsModule = (() => {
        "use strict";

        /**
         * Formata valores monet√°rios para o padr√£o brasileiro
         * @param {number} value - Valor a ser formatado
         * @returns {string} Valor formatado (ex: "R$ 10,50")
         */
        const formatCurrency = (value) => {
          return `R$ ${value.toFixed(2).replace(".", ",")}`;
        };

        /**
         * Formata hora para o padr√£o brasileiro
         * @param {Date} date - Data a ser formatada
         * @returns {string} Hora formatada (ex: "14:30")
         */
        const formatTime = (date = new Date()) => {
          return date.toLocaleTimeString("pt-BR", {
            hour: "2-digit",
            minute: "2-digit",
          });
        };

        /**
         * Sanitiza entrada de texto para evitar XSS
         * @param {string} text - Texto a ser sanitizado
         * @returns {string} Texto seguro
         */
        const sanitizeText = (text) => {
          const div = document.createElement("div");
          div.textContent = text;
          return div.innerHTML;
        };

        /**
         * Debounce para otimizar performance
         * @param {Function} func - Fun√ß√£o a ser executada
         * @param {number} wait - Tempo de espera em ms
         * @returns {Function} Fun√ß√£o com debounce
         */
        const debounce = (func, wait) => {
          let timeout;
          return function executedFunction(...args) {
            const later = () => {
              clearTimeout(timeout);
              func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
          };
        };

        /**
         * Valida se um elemento existe no DOM
         * @param {string} selector - Seletor CSS
         * @returns {Element|null} Elemento ou null
         */
        const getElement = (selector) => {
          const element = document.querySelector(selector);
          if (!element) {
            console.warn(`Elemento n√£o encontrado: ${selector}`);
          }
          return element;
        };

        /**
         * Cria elemento DOM com atributos
         * @param {string} tag - Tag HTML
         * @param {Object} attributes - Atributos do elemento
         * @param {string} content - Conte√∫do interno
         * @returns {Element} Elemento criado
         */
        const createElement = (tag, attributes = {}, content = "") => {
          const element = document.createElement(tag);

          Object.entries(attributes).forEach(([key, value]) => {
            if (key === "className") {
              element.className = value;
            } else if (key === "dataset") {
              Object.entries(value).forEach(([dataKey, dataValue]) => {
                element.dataset[dataKey] = dataValue;
              });
            } else {
              element.setAttribute(key, value);
            }
          });

          if (content) {
            element.innerHTML = content;
          }

          return element;
        };

        // API p√∫blica
        return {
          formatCurrency,
          formatTime,
          sanitizeText,
          debounce,
          getElement,
          createElement,
        };
      })();

      // ==================== M√ìDULO DE NOTIFICA√á√ïES ====================
      const NotificationModule = (() => {
        "use strict";

        const NOTIFICATION_TYPES = {
          SUCCESS: "success",
          ERROR: "error",
          INFO: "info",
          WARNING: "warning",
        };

        /**
         * Exibe notifica√ß√£o para o usu√°rio
         * @param {string} message - Mensagem a ser exibida
         * @param {string} type - Tipo da notifica√ß√£o
         * @param {number} duration - Dura√ß√£o em ms
         */
        const show = (
          message,
          type = NOTIFICATION_TYPES.INFO,
          duration = 3000
        ) => {
          const notificationArea = UtilsModule.getElement("#notificationArea");
          if (!notificationArea) return;

          const notification = UtilsModule.createElement(
            "div",
            {
              className: `notification notification--${type}`,
              "aria-live": "polite",
            },
            `
            <div class="notification__content">
                <i class="notification__icon ${getIconForType(type)}"></i>
                <span class="notification__message">${UtilsModule.sanitizeText(
                  message
                )}</span>
            </div>
        `
          );

          notificationArea.appendChild(notification);

          // Auto remo√ß√£o
          setTimeout(() => {
            notification.classList.add("notification--removing");
            setTimeout(() => notification.remove(), 300);
          }, duration);
        };

        /**
         * Obt√©m √≠cone apropriado para o tipo de notifica√ß√£o
         * @param {string} type - Tipo da notifica√ß√£o
         * @returns {string} Classe do √≠cone
         */
        const getIconForType = (type) => {
          const icons = {
            [NOTIFICATION_TYPES.SUCCESS]: "fas fa-check-circle",
            [NOTIFICATION_TYPES.ERROR]: "fas fa-exclamation-circle",
            [NOTIFICATION_TYPES.INFO]: "fas fa-info-circle",
            [NOTIFICATION_TYPES.WARNING]: "fas fa-exclamation-triangle",
          };
          return icons[type] || icons[NOTIFICATION_TYPES.INFO];
        };

        // M√©todos de conveni√™ncia
        return {
          show,
          success: (message, duration) =>
            show(message, NOTIFICATION_TYPES.SUCCESS, duration),
          error: (message, duration) =>
            show(message, NOTIFICATION_TYPES.ERROR, duration),
          info: (message, duration) =>
            show(message, NOTIFICATION_TYPES.INFO, duration),
          warning: (message, duration) =>
            show(message, NOTIFICATION_TYPES.WARNING, duration),
          TYPES: NOTIFICATION_TYPES,
        };
      })();

      // ==================== M√ìDULO DE UI ====================
      const UIModule = (() => {
        "use strict";

        /**
         * Atualiza hor√°rio atual
         */
        const updateCurrentTime = () => {
          const timeElement = UtilsModule.getElement("#currentTime");
          if (timeElement) {
            timeElement.textContent = UtilsModule.formatTime();
          }
        };

        /**
         * Atualiza status e servi√ßos dispon√≠veis
         */
        const updateAvailableServices = () => {
          const servicesContainer =
            UtilsModule.getElement("#availableServices");
          const statusDot = UtilsModule.getElement("#statusDot");
          const statusText = UtilsModule.getElement("#statusText");

          if (!servicesContainer || !statusDot || !statusText) return;

          const status = AvailabilityModule.getStatus();
          const availableServices = Object.values(status.services).filter(
            (service) => service.available
          );

          // Atualiza status do estabelecimento
          statusDot.className = `status-dot ${
            status.isOpen ? "status-open" : "status-closed"
          }`;
          statusText.textContent = status.message;

          // Atualiza servi√ßos dispon√≠veis
          if (availableServices.length === 0) {
            servicesContainer.innerHTML = `
              <span class="service-tag unavailable">
                <i class="fas fa-times-circle"></i>
                Nenhum servi√ßo dispon√≠vel
              </span>
            `;
          } else {
            servicesContainer.innerHTML = availableServices
              .map(
                (service) => `
                <span class="service-tag available">
                  <i class="${service.icon}"></i>
                  ${service.name}
                </span>
              `
              )
              .join("");
          }
        };

        /**
         * Atualiza menus dispon√≠veis no card principal
         */
        const updateAvailableMenus = () => {
          const menuContainer = UtilsModule.getElement("#availableMenus");
          const btnOpenMenu = UtilsModule.getElement("#btnOpenMenu");
          const btnMenuText = UtilsModule.getElement("#btnMenuText");

          if (!menuContainer || !btnOpenMenu || !btnMenuText) return;

          const status = AvailabilityModule.getStatus();
          const availableServices = Object.values(status.services).filter(
            (service) => service.available
          );

          if (availableServices.length === 0) {
            const nextAvailable = AvailabilityModule.getNextAvailableTime();
            menuContainer.innerHTML = `
              <span class="unavailable-tag">
                <i class="fas fa-clock"></i>
                Fora do hor√°rio de funcionamento
              </span>
              <div class="next-available">
                <small><i class="fas fa-info-circle"></i> ${nextAvailable}</small>
              </div>
            `;
            btnOpenMenu.classList.add("disabled");
            btnMenuText.textContent = "Indispon√≠vel";
          } else {
            menuContainer.innerHTML = availableServices
              .map(
                (service) => `
                <span class="available-tag">
                  <i class="fas fa-check"></i>
                  ${service.name}
                </span>
              `
              )
              .join("");
            btnOpenMenu.classList.remove("disabled");
            btnMenuText.textContent = "Abrir Card√°pio";
          }
        };

        // API p√∫blica
        return {
          updateCurrentTime,
          updateAvailableServices,
          updateAvailableMenus,
        };
      })();

      // ==================== M√ìDULO PRINCIPAL ====================
      const App = (() => {
        "use strict";

        /**
         * Gerenciador central de eventos
         * @param {Event} event - Evento capturado
         */
        const handleGlobalClick = (event) => {
          const target = event.target.closest("[data-action]");
          if (!target) return;

          const action = target.dataset.action;

          // Prevenir comportamento padr√£o para bot√µes
          if (target.tagName === "BUTTON") {
            event.preventDefault();
          }

          // Roteamento de a√ß√µes
          switch (action) {
            case "logout":
              NotificationModule.info("Saindo da conta...");
              // window.location.href = "login.html"; // Futuro redirecionamento
              break;

            case "open-menu":
              // Verifica status antes de tentar abrir
              const status = AvailabilityModule.getStatus();
              if (!status.isOpen) {
                NotificationModule.warning(
                  "Servi√ßo indispon√≠vel, consulte o hor√°rio de funcionamento"
                );
              }
              NavigationModule.openCardapio(); // Usa a nova fun√ß√£o de navega√ß√£o inteligente
              break;

            case "show-my-orders":
              NotificationModule.info(
                'Funcionalidade "Meus Pedidos" ser√° implementada em breve!'
              );
              // window.location.href = 'meus-pedidos.html'; // Futuro redirecionamento
              break;

            case "close-closed-modal":
              NavigationModule.closeClosedModal();
              break;

            default:
              console.warn(`A√ß√£o n√£o reconhecida: ${action}`);
          }
        };

        /**
         * Configura responsividade
         */
        const setupResponsive = () => {
          const handleResize = UtilsModule.debounce(() => {
            // L√≥gica de responsividade espec√≠fica para a HOME, se necess√°rio
          }, 250);

          window.addEventListener("resize", handleResize);
          handleResize(); // Executar imediatamente
        };

        /**
         * Inicializa a aplica√ß√£o
         */
        const init = () => {
          try {
            // Renderizar interface inicial
            UIModule.updateCurrentTime();
            UIModule.updateAvailableServices();
            UIModule.updateAvailableMenus();

            // Configurar eventos globais
            document.addEventListener("click", handleGlobalClick);

            // Configurar responsividade
            setupResponsive();

            // Atualizar informa√ß√µes periodicamente
            setInterval(() => {
              UIModule.updateCurrentTime();
              UIModule.updateAvailableServices();
              UIModule.updateAvailableMenus();
            }, DataModule.CONFIG.UPDATE_TIME_INTERVAL);

            console.log("üöÄ P√°gina HOME inicializada com sucesso!");
            NotificationModule.success("Bem-vindo ao Barat√£o Assados!", 2000);
          } catch (error) {
            console.error("‚ùå Erro na inicializa√ß√£o da HOME:", error);
            NotificationModule.error(
              "Erro ao carregar a p√°gina. Tente recarregar."
            );
          }
        };

        // API p√∫blica
        return {
          init,
        };
      })();

      // ==================== INICIALIZA√á√ÉO ====================
      document.addEventListener("DOMContentLoaded", App.init);

      // Exportar m√≥dulos para debug (apenas em desenvolvimento)
      if (
        typeof window !== "undefined" &&
        window.location.hostname === "localhost"
      ) {
        window.DebugModules = {
          Availability: AvailabilityModule,
          Navigation: NavigationModule,
          Data: DataModule,
          Utils: UtilsModule,
          Notification: NotificationModule,
          UI: UIModule,
          App,
        };
      }
    </script>
  </body>
</html>
